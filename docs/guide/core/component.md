# Сущности и компоненты
Ядро `Orillusion` вдохновлено структурой [ECS](https://wikipedia.org/wiki/Entity_component_system), и следует принципу `Композиция над наследованием`. Реализовав собственную компонентная система. Мы разделяем традиционную сложную логику на независимые и многоразовые части. Каждая часть может быть инкапсулирована и запускается независимо. Затем, с помощью гибкой комбинации, несколько простых компонентов объединяются для выполнения сложных функций и логики.

![ECS](/images/component.svg)

## Сущность
`Entity` контейнер для компонентов для подключения различных компонентов. Он не имеет фактической функции и не будет рендериться или не выражать никаких функций, если в него не добавляются компоненты.
На практике мы не будем работать с `Entity` напрямую. Обычно мы используем [Object3D](/guide/core/object) и [Scene3D](/guide/core/scene) как кнтейнер узлов сцены чтобы подключить различные компоненты.

## Компонент
`Component` это серия многоразовых модулей или данных. Все функции `Entity` реализуются путем загрузки `Component`. Определяя логический обратный вызов и жизненный цикл компонента, мы можем свободно объединить различные компоненты, чтобы дать `Entity` иметь разные функции, такие как:

- `a camera = Position + Rotation + Camera3D`  
- `a bulb = Position + Rotation + PointLight + Shadow` 
- `a box = Position + Rotation + Scale + BoxGeometry + Material` 

Среди них все компоненты независимы и равны, и каждый выполняет одну функцию. Это разделение делает `Position` и `Rotation` многоразовыми модулями, и они могут быть объединены по мере необходимости, что значительно повышает эффективность повторного использования кода, а также эффективно снижает связь между модулями.

## Встроенные компоненты

У нас встроено много основных компонентов в движке Orillusion, которые инкапсулируют много основных функций. Например, `Object3D` имеет встроенный компонент `Transform`, который содержит `Position`, `Rotation`, `Scale` и другие связанные функции. Позволяя пользователями управлять пространственной трансформацией `Object3D`.


Это обычно используемые встроенные компоненты в Orillusion:

|            Имя            |                                       Описание                                       |
|:--------------------------:|:---------------------------------------------------------------------------------------:|
|          Camera3D          |                          компонент Camera, задает узел камеры                          |
|         Transform          | компонент Transform, используется для управления координатной матрицей трансформаций объекта |
|   HoverCameraController    |      Camera controlort, используется для управления положением и ориентацией камеры      |
|        MeshRenderer        |              Mesh renderer component, используется для рендеринга мешей и материалов               |
|        DirectLight         |         Directional light, тип и параметры направленного света         |
|         PointLight         |           Point light source, тип и параметры точечного света            |
|         SpotLight          |                 Spotlight, прожекторного света                 |
|     ColliderComponent      |                      компонент Collider, используется для обнаружения столкновений                      |
| SkeletonAnimationComponent |            компонент скелетной анимации, используется для контроля воспроизведения анимации             |
|    AtmosphericComponent    |                              компонент Atmospheric skybox                                |

И больше встроенных компонентов можно найти в [Components](/api/#components)

## Основное использование
```ts
//Создать новую сущность
let obj = new Object3D();
//Добавить сущность в сцену
scene.addChild(obj);
```
## Добавить компонент
```ts
let obj = new Object3D();
let light = obj.addComponent(DirectLight)
```

## Удалить компонент
```ts
let obj = new Object3D();
let light = obj.removeComponent(DirectLight)
```

## Отключить компонент
```ts
let obj = new Object3D();
let light = obj.getComponent(DirectLight)
light.enable = false
```

## Включить компонент
```ts
let obj = new Object3D();
let light = obj.getComponent(DirectLight)
light.enable = true
```

## Жизненный цикл компонента
Компонент расширяется от [CompnentBase](/api/classes/ComponentBase), который определяет несколько основных жизненных циклов:

|   Жизненный цикл    | Описание                                                           |
|:--------------:|-----------------------------------------------------------------------|
|      init      | Инициализация компонента, запустите только один раз при создании компонента |
|     start      | Компонент начинает работать, вызывается только перед первым `onUpdate`     |
|      stop      | Компонент вызывает перед разрушением                                     |
|    onUpdate    | Компонент запускает каждый кадр                                           |
| onBeforeUpdate | Компонент запускается перед обновлением                                |
|  onLateUpdate  | Component runs after rendering update                                 |
|    onEnable    | Работает когда `enable = true` , component joins the main loop update      |
|   onDisable    | Work when `enable = false` , component will no longer trigger loop    |

Пользователи могут расширять различные пользовательские функции, унаследовав базовый класс [ComponentBase](/api/classes/ComponentBase), см. [Script Component](/guide/core/script).
